incoming:
  listen: !override
    - 0.0.0.0:53
    - '[::]:53'
webservice:
  webserver: true

recursor:
  forward_zones:
    {%- for name, fwds in pdns_recursor_forwards.items() +%}
    - zone: {{ name }}
      forwarders: {{ fwds | to_yaml }}
    {%- endfor +%}
    - zone: internal.bacchus.io
      forwarders:
        - 10.89.0.1
  rpzs:
    - name: /etc/powerdns/recursor.d/hosts.zone
      defpol: Custom
      defcontent: null.nevi.network
      policyName: hosts
      extendedErrorCode: 15
      extendedErrorExtra: 'blocked by hosts list'

dnssec:
  validation: validate
  log_bogus: true
  trustanchors:
    {%- for name, tas in pdns_recursor_trustanchors.items() +%}
    - name: {{ name }}
      dsrecords: {{ tas | to_yaml }}
    {%- endfor +%}
  negative_trustanchors:
    - name: internal.bacchus.io
      reason: bacchus internal
