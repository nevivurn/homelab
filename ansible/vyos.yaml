- name: Deploy VyOS configuration
  hosts: vyos
  gather_facts: false
  tasks:
    - name: Load configuration commands
      ansible.builtin.set_fact:
        vyos_commands: "{{ lookup('file', vyos_config).splitlines() }}"

    - name: Apply VyOS configuration
      vyos.vyos.vyos_config:
        lines: "{{ vyos_commands }}"
        save: true
