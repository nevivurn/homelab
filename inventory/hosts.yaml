all:
  vars:
    ansible_python_interpreter: python3
    ansible_pipelining: true

    kubelet_kubernetes_version: v1.34

    etcd_ca_host: localhost
    etcd_ca_basedir: pki/etcd
    etcd_ca_cn: etcd-ca
    etcd_cert_basedir: /etc/etcd/ssl
    etcd_data_dir: /var/lib/etcd
    etcd_config_dir: /etc/etcd
    etcd_image: gcr.io/etcd-development/etcd
    etcd_version: v3.6.5

    patroni_ca_host: localhost
    patroni_ca_basedir: pki/patroni
    patroni_ca_cn: patroni-ca
    patroni_postgres_ca_host: localhost
    patroni_postgres_ca_basedir: pki/patroni-postgres
    patroni_postgres_ca_cn: patroni-postgres-ca

    patroni_scope: netbox
    patroni_config_dir: /etc/patroni
    patroni_postgres_data_dir: /var/lib/postgresql
    patroni_image: ghcr.io/nevivurn/patroni
    patroni_version: latest

    patroni_haproxy_config_dir: /etc/haproxy
    patroni_haproxy_image: docker.io/library/haproxy
    patroni_haproxy_version: '3.2'

    kea_config_dir: /etc/kea
    kea_data_dir: /var/lib/kea
    kea_dhcp4_image: docker.cloudsmith.io/isc/docker/kea-dhcp4
    kea_dhcp6_image: docker.cloudsmith.io/isc/docker/kea-dhcp6
    kea_version: 3.0.1

    pdns_config_dir: /etc/powerdns
    pdns_recursor_image: docker.io/powerdns/pdns-recursor-53
    pdns_recursor_version: 5.3.0

  hosts:
    localhost:
      ansible_connection: local

    pve01.mgmt.nevi.network:
      ansible_host: 192.168.2.11
      ansible_user: root

    net01.inf.nevi.network:
      ansible_host: net01.nevi.network
      ansible_user: root
      ip: 10.64.20.4
      ip6: fdbc:ba6a:38de:20::4
    net02.inf.nevi.network:
      ansible_host: net02.nevi.network
      ansible_user: root
      ip: 10.64.20.5
      ip6: fdbc:ba6a:38de:20::5
    net03.inf.nevi.network:
      ansible_host: net03.nevi.network
      ansible_user: root
      ip: 10.64.20.6
      ip6: fdbc:ba6a:38de:20::6

etcd_ca:
  hosts:
    localhost:
patroni_ca:
  hosts:
    localhost:

kubelet:
  children:
    etcd:
      hosts:
        net01.inf.nevi.network:
        net02.inf.nevi.network:
        net03.inf.nevi.network:

    patroni:
      hosts:
        net01.inf.nevi.network:
        net02.inf.nevi.network:

    patroni_haproxy:
      children:
        kea:
          hosts:
            net01.inf.nevi.network:
            net02.inf.nevi.network:
        pdns:
          hosts:
            net01.inf.nevi.network:
            net02.inf.nevi.network:
            net03.inf.nevi.network:

    chrony:
      hosts:
        net01.inf.nevi.network:
        net02.inf.nevi.network:
        net03.inf.nevi.network:
